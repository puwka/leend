-- Создание таблицы для FAQ (вопросы и ответы)
CREATE TABLE IF NOT EXISTS faq (
  id TEXT PRIMARY KEY,
  question TEXT NOT NULL,
  answer TEXT NOT NULL,
  order_index INTEGER DEFAULT 0,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Создание таблицы для услуг
CREATE TABLE IF NOT EXISTS services (
  id TEXT PRIMARY KEY,
  title TEXT NOT NULL,
  description TEXT NOT NULL,
  icon TEXT NOT NULL, -- название иконки из lucide-react
  features JSONB DEFAULT '[]'::jsonb, -- массив строк с особенностями
  order_index INTEGER DEFAULT 0,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Триггеры для автоматического обновления updated_at
CREATE TRIGGER update_faq_updated_at
  BEFORE UPDATE ON faq
  FOR EACH ROW
  EXECUTE FUNCTION update_updated_at_column();

CREATE TRIGGER update_services_updated_at
  BEFORE UPDATE ON services
  FOR EACH ROW
  EXECUTE FUNCTION update_updated_at_column();

-- Начальные данные FAQ (можно удалить вопрос о гарантиях или оставить для редактирования)
INSERT INTO faq (id, question, answer, order_index)
VALUES 
  ('1', 'Как быстро вы можете предоставить персонал?', 'В стандартных случаях мы можем вывести персонал на объект в течение 24-48 часов. При срочной необходимости — в тот же день, благодаря резерву из более чем 1000 сотрудников.', 1),
  ('2', 'Какие документы нужны для начала работы?', 'Для начала сотрудничества достаточно заявки с описанием требований к персоналу. Мы заключаем договор на оказание услуг, который включает все необходимые юридические аспекты, страхование и ответственность сторон.', 2),
  ('3', 'Как происходит контроль качества работы?', 'Мы назначаем ответственного менеджера на каждый проект. Он контролирует выход персонала, соблюдение техники безопасности и качество выполнения работ. Вы также получаете ежедневные отчёты по желанию.', 3),
  ('4', 'Что если сотрудник не вышел на смену?', 'В таких случаях мы оперативно производим замену из резерва. Это происходит автоматически и бесплатно. Наша цель — обеспечить бесперебойную работу вашего объекта.', 4),
  ('5', 'Как формируется стоимость услуг?', 'Стоимость зависит от квалификации специалистов, объёма работ, сроков и специфики проекта. Мы предоставляем прозрачную калькуляцию и не имеем скрытых платежей. Свяжитесь с нами для расчёта стоимости под ваш проект.', 5),
  ('6', 'Работаете ли вы с юридическими лицами?', 'Да, мы работаем как с юридическими лицами, так и с индивидуальными предпринимателями. Предоставляем полный пакет закрывающих документов: акты, счета-фактуры и т.д.', 6),
  ('7', 'В каких регионах вы работаете?', 'Основной регион работы — Москва и Московская область. Для крупных проектов готовы рассмотреть работу в других регионах России.', 7)
ON CONFLICT (id) DO NOTHING;

-- Начальные данные Services
INSERT INTO services (id, title, description, icon, features, order_index)
VALUES 
  ('1', 'Строительные объекты', 'Разнорабочие, подсобники, бетонщики, каменщики — любые строительные специальности для объектов любого масштаба', 'Building2', '["Жилые комплексы", "Коммерческая недвижимость", "Инфраструктура"]'::jsonb, 1),
  ('2', 'Складские работы', 'Грузчики, комплектовщики, упаковщики — слаженная работа на складах любой сложности', 'Warehouse', '["Погрузка/разгрузка", "Комплектация заказов", "Инвентаризация"]'::jsonb, 2),
  ('3', 'Монтажные работы', 'Монтажники металлоконструкций, сборщики, слесари — точная и безопасная работа на высоте и на земле', 'Wrench', '["Металлоконструкции", "Оборудование", "Инженерные системы"]'::jsonb, 3),
  ('4', 'Промышленные работы', 'Операторы станков, наладчики, разнорабочие на производство — бесперебойная работа вашего предприятия', 'Factory', '["Производственные линии", "Техобслуживание", "Подсобные работы"]'::jsonb, 4)
ON CONFLICT (id) DO NOTHING;






